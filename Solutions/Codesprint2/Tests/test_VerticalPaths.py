import io
import sys
from unittest import TestCase

from Solutions.Codesprint2.VerticalPaths import main


class TestSolution(TestCase):
    def test_initial_case(self):
        input_string = '''1
8 8
1 2 3
1 3 1
2 4 5
2 5 1
2 6 1
3 7 2
4 8 1
1 2 3
2 8 5
1 8 7
1 5 8
1 6 10
3 7 5
1 7 6
1 7 6
'''

        result = '''37
'''
        sys.stdin = io.StringIO(input_string)
       # sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_case2(self):
        input_string = '''1
8 8
1 2 3017+
1 3 1
4 2 5
2 5 1
6 2 1
3 7 2
4 8 1
1 2 3
2 8 5
1 8 7
1 5 8
1 6 10
3 7 5
1 7 6
1 7 6
'''

        result = '''37
'''
        sys.stdin = io.StringIO(input_string)
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())


    def test_case3(self):
        input_string = '''1
28 29
27 8 2
19 6 3
20 18 1
4 12 1
12 26 5
25 20 2
11 17 1
6 18 5
7 21 1
26 27 7
3 2 2
24 3 1
21 12 1
14 12 6
16 15 6
23 25 1
8 13 2
18 16 7
10 3 1
22 9 1
5 19 1
13 17 1
15 27 6
2 18 2
28 14 3
1 28 2
9 6 2
16 19 648782592
26 22 187672305
1 11 62390243
1 14 353235196
14 13 125101260
28 11 810549202
27 16 947094855
26 9 808226075
20 25 869657181
26 8 274146540
18 23 418347038
13 11 642869026
14 18 43621539
1 9 12926235
20 25 387172188
28 7 153916193
14 26 425620536
26 13 570818733
14 19 345884813
26 25 570818011
14 26 422712761
27 24 534543720
28 5 243172995
26 3 482600102
14 4 508339289
27 8 291100130
12 2 772306653
28 14 533865850
3 10 243069872
'''

        result = '''9678062818
'''

       # 41769347: 9678062818 dict_keys([0, 1, 3, 6, 7, 8, 10, 11, 15, 16, 17, 18, 20, 21, 24, 25, 26, 27, 28]): (len 19)
        sys.stdin = io.StringIO(input_string)
       # sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_case4(self):
        input_string = '''1
47 22
11 30 1
18 30 1
3 30 1
28 30 1
9 30 1
43 42 1
38 44 1
40 44 1
34 30 1
10 46 1
31 46 1
16 30 1
22 30 1
44 30 1
1 30 4
8 44 1
36 30 1
37 30 1
41 30 1
21 30 1
14 30 1
12 44 1
2 30 1
45 46 1
23 30 1
5 46 1
17 30 1
15 46 1
6 30 1
4 46 1
35 30 1
20 30 1
25 30 1
39 30 1
42 46 1
7 30 1
46 30 1
26 46 1
27 30 1
33 30 1
13 30 1
24 22 1
29 44 1
47 46 1
19 22 1
32 30 1
1 32 815327827
30 33 686008980
30 17 714339962
1 3 66400452
1 32 397642637
30 19 763417712
30 2 531157107
30 11 142398214
30 34 959344037
1 38 617188934
30 28 504351412
1 32 39292230
30 6 652293237
30 2 257354174
1 32 256348195
1 18 242642973
1 39 994460845
1 22 69431578
30 28 581822407
1 31 868109919
30 23 53009563
30 46 458767131
'''

        result = '''20278155192
'''
        sys.stdin = io.StringIO(input_string)
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_case5(self):
        input_string = '''1
61 38
41 55 1
53 55 1
5 55 2
56 55 1
44 42 1
49 5 1
36 53 1
34 42 1
3 17 1
30 21 1
8 31 1
31 55 4
52 17 1
32 55 1
51 5 1
1 55 5
14 53 1
61 42 1
42 55 1
45 42 1
26 21 1
37 42 1
25 42 1
4 22 1
40 42 1
10 9 1
2 31 2
18 42 1
33 55 1
28 42 1
21 55 1
19 42 1
47 42 1
23 31 1
57 42 1
59 21 1
50 42 1
9 55 1
46 31 1
24 32 1
60 31 1
16 55 1
20 9 1
27 42 1
58 55 1
11 55 1
35 9 1
48 7 1
38 9 1
6 55 1
29 42 1
22 55 1
54 5 1
17 55 1
13 31 1
39 55 1
43 17 1
7 55 2
15 31 1
12 55 2
55 20 421638151
42 57 988144682
55 44 302652468
55 9 892845347
1 48 25471111
55 12 922952678
1 57 664509311
1 35 316159613
55 46 921833040
55 23 343458118
21 26 624979198
1 8 851634738
55 2 370908381
1 33 798580409
55 2 251493097
55 7 489677567
1 41 113332720
55 51 348896326
1 29 677712530
1 61 614398243
55 46 921379535
1 36 930236835
55 12 619538009
55 11 206661182
1 21 574143900
1 41 761113846
55 49 126581287
1 46 517103148
9 35 873720312
55 20 353236035
31 15 815093823
55 15 924690766
1 55 505683025
55 2 735961814
55 27 550910066
1 12 592403946
1 49 386188235
55 38 164398926
'''

        result = '''13404413440
'''
        sys.stdin = io.StringIO(input_string)
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_file_case1(self):
        file_input = open('verticalPaths1.in')
        sys.stdin = file_input
       # sys.stdout = io.StringIO()
        main()
        self.assertEqual('270243667093', sys.stdout.getvalue().strip())

    def test_case6(self):
        input_string = '''1
62 44
25 17 1
48 12 1
46 12 1
33 27 1
36 53 1
10 38 1
24 27 1
1 27 4
31 27 1
18 12 1
4 12 1
26 10 1
49 10 1
21 10 1
7 27 1
9 38 1
27 12 7
8 12 1
42 12 1
20 12 1
57 53 1
58 10 1
17 38 1
15 54 1
55 38 1
43 38 1
14 12 1
54 12 1
45 12 1
38 12 3
56 12 1
3 27 1
34 12 1
37 27 1
32 41 1
16 12 1
60 38 1
51 38 1
41 12 1
52 8 1
53 12 1
62 17 1
35 38 1
28 10 1
11 45 1
59 27 1
40 54 1
29 8 1
47 51 1
5 38 1
13 8 1
44 12 1
39 27 1
23 38 1
6 38 1
61 10 1
19 27 1
50 12 1
22 38 1
2 54 1
30 38 1
27 34 802863632
10 26 30239358
12 34 540679358
38 22 85526817
12 2 904122482
12 18 268318514
27 20 479096657
1 31 42217195
27 15 525111277
27 56 851870477
12 16 773277348
38 25 255613312
12 55 963027047
1 45 185104427
1 45 266163733
27 41 222419524
1 27 375545693
12 29 754738993
12 13 658596180
54 40 964204906
12 11 746596188
27 51 429628414
1 35 387520685
27 50 113937504
27 15 516964566
38 21 27571661
1 53 408040866
1 17 59129251
1 33 729005885
12 53 565047435
27 54 931498715
12 18 530479235
27 8 380171265
12 55 772924049
27 59 488444994
10 49 250049456
1 9 757567760
27 10 909595377
1 8 609034801
12 16 976528846
1 24 278087581
1 5 988067357
27 30 754961137
27 9 91829200
'''

        result = '''13265108756
'''
        sys.stdin = io.StringIO(input_string)
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_case7(self):
        input_string = '''1
73 31
29 20 3
18 14 1
66 26 1
37 21 1
23 29 3
10 54 1
15 41 1
9 44 1
50 5 1
58 8 1
7 28 1
27 38 1
5 34 1
44 64 1
51 48 1
34 17 1
4 3 1
54 8 1
22 3 2
14 15 1
13 7 1
73 55 1
20 16 3
63 54 1
3 33 1
30 24 1
43 11 1
26 72 1
16 37 2
32 65 1
53 35 1
70 37 2
67 39 1
47 22 1
35 70 1
12 54 1
69 30 1
19 41 1
28 34 1
61 23 1
33 12 1
31 48 1
38 32 1
71 61 1
60 69 1
52 65 1
11 21 1
46 7 1
48 22 2
68 45 1
2 19 1
59 68 1
72 54 1
65 40 1
39 3 1
56 23 3
36 2 1
24 73 1
25 48 1
1 70 2
6 59 1
64 52 1
45 5 1
8 53 1
62 70 1
49 63 1
42 64 1
17 56 2
40 56 1
21 24 1
41 65 1
57 42 1
72 26 938840747
3 48 154274290
29 15 184394803
23 61 226538930
70 29 785561838
70 62 60028821
8 4 655908696
54 72 451962223
3 47 506224351
1 34 701503855
8 51 923965251
3 67 508118762
37 17 550885719
56 34 643170114
52 44 640477570
20 23 407479039
16 34 623689077
5 6 130280562
53 51 871990658
12 48 414927290
16 59 497009195
1 35 625551972
35 12 170435983
70 71 314806261
16 40 748180688
1 37 232764316
1 62 600685072
53 47 436650818
16 61 546842327
68 6 407758156
1 9 258165183
'''

        result = '''8557921393
'''
        sys.stdin = io.StringIO(input_string)
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result, sys.stdout.getvalue())

    def test_file_case2(self):
        file_input = open('verticalPaths2.in')
        sys.stdin = file_input
        result = '''17079508449
13850929503
20278155192
8378878744
9678062818
12209593385
1411382763
6662463761
4036406296
13404413440
4348452645
13265108756
21258461159
8557921393
13989094357
1866677525
4876500011
12473409444
499996442
9726938214'''
        sys.stdout = io.StringIO()
        main()
        self.assertEqual(result.strip(), sys.stdout.getvalue().strip())
 #   def test_case1(self):
 #       file_input = open('GridChallenge.in')
 #       expected_output = open('GridChallenge.out')
 #       sys.stdin = file_input
 #       sys.stdout = io.StringIO()
 #       main()
 #       self.assertEqual(expected_output.read().strip(), sys.stdout.getvalue().strip())


